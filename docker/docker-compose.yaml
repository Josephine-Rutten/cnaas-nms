version: '3'
services:
  cnaas_api:
    build: ./api/
    ports:
      - 5000:5000
    networks:
      - cnaas
    environment:
      - GITREPO_TEMPLATES
      - GITREPO_SETTINGS
  cnaas_postgres:
    build: ./postgres/
    ports:
      - 5432:5432
    environment:
      - POSTGRES_USER=cnaas
      - POSTGRES_PASSWD=cnaas
      - POSTGRES_DB=cnaas
    networks:
      - cnaas
  cnaas_httpd:
    build: ./httpd/
    ports:
      - 80:80
    networks:
      - cnaas
    environment:
      - GITREPO_TEMPLATES
  cnaas_dhcpd:
    build: ./dhcpd/
    ports:
      - 67:67/udp
    networks:
      - cnaas
    environment:
      - GITREPO_ETC
networks:
  cnaas:
